<section>
    <div id="container-body" class="container">
        <h2>How to <span class="how-to-arrow">&#10132;</span> Correlate data</h2>
        <div class="section-divider"></div>
        <h4 class="how-to-header">Objective</h4>
        <p>In this guide, we will cover:</p>

        <ol>
            <li>
                How to calculate the
                <a target="_blank" href="http://en.wikipedia.org/wiki/Pearson_product-moment_correlation_coefficient">correlation coefficient</a>.
            </li>
            <li>An example showing how to explore correlation patterns with data.</li>
        </ol>

        <h4 class="how-to-header">Prerequisites</h4>

        <p>
            Before you get started, you need to have read through the <a href="#/gettingStarted">Getting Started Guide</a>.
        </p>

        <p>
            If you want to follow along with the code in the guide, the easiest place to start is with our
            <a target="_blank" href="http://jsfiddle.net/cvLet9dt/">JSFiddle</a>.
        </p>

        <p class="text-danger">
            <strong>Don't forget:</strong> Any changes to a chart are not updated until a draw is called on a chart object
            or a chart group.
        </p>


        <h3>How to calculate the correlation coefficient</h3>
        <hr />

        <p>
            The <a target="_blank" href="http://en.wikipedia.org/wiki/Pearson_product-moment_correlation_coefficient">correlation coefficient</a>
            represents how strong or weak a relationship is between two variables.
        </p>
        <ul>
            <li>A correlation of 0 means the parameters are unrelated.</li>
            <li>A correlation of 1 means there is a positive relation between the parameters.</li>
            <li>A correlation of -1 means there is a negative relation between the parameters.</li>
        </ul>
        <p>
            The simplest way of getting started is to use
                <api-docs page="insight.correlation" anchor="fromValues">insight.correlation.fromValues</api-docs>.  In
            the code below, we create some data and call that function:
        </p>

        <code class="language-javascript">
        var xValues = [1,  3,  8, 14, 22];
        var yValues = [4, 62, 11, 17, 23];

        var correlationValue = insight.correlation.fromValues(xValues, yValues);

        // At this point; correlationValue equals -0.13017826008536706
        </code>

        <p>
            An alternative method for calculating the correlation coefficient is by using
            <api-docs page="insight.correlation" anchor="fromValues">insight.correlation.fromDataProvider</api-docs>.
            This allows any data provider (such as a <api-docs page="insight.DataSet">insight.DataSet</api-docs>) to be
            analysed:
        </p>

        <code class="language-javascript">
        var leaguePlaces = [
            { "currentPosition" : 5, "currentPoints" : 18, "targetPoints" : 50, "teamName" : 'Chuffed FC' },
            { "currentPosition" : 3, "currentPoints" : 27, "targetPoints" : 45, "teamName" : 'Old Boys' },
            { "currentPosition" : 1, "currentPoints" : 35, "targetPoints" : 90, "teamName" : 'Hairy Harriers' },
            { "currentPosition" : 2, "currentPoints" : 34, "targetPoints" : 40, "teamName" : 'Kings Arms' },
            { "currentPosition" : 6, "currentPoints" : 18, "targetPoints" : 35, "teamName" : 'YMCA Athletic' },
            { "currentPosition" : 7, "currentPoints" : 10, "targetPoints" : 3,  "teamName" : 'Wasters' },
            { "currentPosition" : 8, "currentPoints" : 2,  "targetPoints" : 74, "teamName" : 'Dreamers' },
            { "currentPosition" : 4, "currentPoints" : 20, "targetPoints" : 65, "teamName" : 'Posers' },
            { "currentPosition" : 3, "currentPoints" : 22, "targetPoints" : 38, "teamName" : 'Hackney Hackers' }
        ];

        var dataset = new insight.DataSet(leaguePlaces);

        var correlationValue = insight.correlation.fromDataProvider(dataset, function(d) {
            return d.targetPoints;
        }, function(d) {
            return d.currentPoints;
        });

        // At this point; correlationValue equals 0.2219306826177501
        </code>

        <h3>An example exploring correlation patterns in data</h3>
        <hr />

        <p>
            In the chart below, the <code>leaguePlaces</code> data has been plotted using a
            <api-docs page="insight.ScatterSeries">insight.ScatterSeries</api-docs>.
        </p>
        <p>
            By clicking on the buttons below
            the <api-docs page="insight.Series" anchor="#self.keyFunction">insight.Series.keyFunction</api-docs>
            and <api-docs page="insight.Series" anchor="#self.valueFunction">insight.Series.valueFunction</api-docs> are
            updated and the correlation is recalculated:
        </p>


        <div id="bubbleChart" class="exampleChart"></div>
        <p id="correlationDiv"><br><b>Correlation coefficient of chart data</b>: <span id="correlationCoefficient">0</span></p>

        <div class="row">
            <div class="col-md-6">
                <div class="panel panel-info">
                    <div class="panel-heading">Value for X Axis: <span id="xlabel">Current Position</span></div>
                    <div class="panel-body">
                        <div class="btn-group btn-group-justified">
                            <div id="xcurrentposition" class="btn btn-default btn-sm">Current Position</div>
                            <div id="xcurrentpoints" class="btn btn-default btn-sm">Current Points</div>
                            <div id="xtargetpoints" class="btn btn-default btn-sm">Target Points</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="panel panel-info">
                    <div class="panel-heading">Value for Y Axis: <span id="ylabel">Current Points</span></div>
                    <div class="panel-body">
                        <div class="btn-group btn-group-justified">
                            <div id="ycurrentposition" class="btn btn-default btn-sm">Current Position</div>
                            <div id="ycurrentpoints" class="btn btn-default btn-sm">Current Points</div>
                            <div id="ytargetpoints" class="btn btn-default btn-sm">Target Points</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<div id="footer" class="container">
    <footer>Insight.js is an open source project created and maintained by <a target="_blank" href="//scottlogic.com">Scott
        Logic</a>
    </footer>
</div>

